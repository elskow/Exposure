@using Gallery.Models
@model PlaceDetailPage

@{
    ViewData["Title"] = Model.Name;
}

<div class="max-w-[1600px] mx-auto px-6 lg:px-12 flex flex-col-reverse lg:flex-row gap-12 lg:gap-24 relative text-[#111]">

    <div class="flex-grow pt-8 lg:pt-32 pb-32">
        <div class="grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-x-3 gap-y-6 md:gap-x-4 md:gap-y-8">
            @foreach (var photo in Model.Photos)
            {
                <div class="flex flex-col group cursor-pointer transition-transform active:scale-95 duration-150 ease-out"
                     onclick="location.href='@Url.Action("Detail", "Place", new { placeId = Model.PlaceId, photoNum = photo.Num })'">
                    
                    <div class="w-full relative overflow-hidden border border-black/5 @(photo.IsPortrait ? "aspect-[2/3]" : "aspect-[3/2]")">
                        <div class="absolute inset-0 bg-neutral-200"></div>
                        <div class="absolute inset-0 bg-gradient-to-b from-black/5 to-black/20"></div>
                        <div class="absolute inset-0 opacity-20 mix-blend-overlay" 
                             style="background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0IiBoZWlnaHQ9IjQiPgo8cmVjdCB3aWR0aD0iNCIgaGVpZ2h0PSI0IiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9IjAuMSIvPgo8L3N2Zz4=');">
                        </div>
                        <div class="absolute inset-0 bg-white/0 group-hover:bg-white/10 transition-colors duration-300"></div>
                    </div>
                    
                    <span class="mt-2 text-[8px] text-gray-300 font-mono tracking-widest group-hover:text-black transition-colors">
                        @photo.Num.ToString("D2")
                    </span>
                </div>
            }
        </div>
    </div>

    <aside class="w-full lg:w-72 lg:sticky lg:top-0 lg:h-screen flex flex-col shrink-0 py-12 lg:py-32 overflow-y-auto hide-scrollbar border-b lg:border-b-0 border-gray-100 lg:border-none">
        
        <div class="mb-12 lg:mb-16">
            <a href="@Url.Action("Index", "Home")" 
               class="group inline-block p-2 -ml-2 text-gray-300 hover:text-black transition-colors duration-300"
               aria-label="Back to Index">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="19" y1="12" x2="5" y2="12"></line>
                    <polyline points="12 19 5 12 12 5"></polyline>
                </svg>
            </a>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:flex lg:flex-col gap-8 lg:gap-0">
            
            <div class="mb-8 lg:mb-14 border-b border-gray-100 pb-8">
                <h1 class="font-mono text-[10px] uppercase tracking-widest text-gray-400 mb-2">PL/@Model.PlaceId.ToString("D2")</h1>
                <div class="font-serif text-[14px] text-gray-900 leading-relaxed italic">
                    <p>Visited @Model.Date</p>
                    <p class="text-gray-400 text-[13px] not-italic mt-1">@Model.TotalPhotos photos / @Model.Favorites favorites</p>
                </div>
            </div>

            <div class="space-y-8">
                
                <div class="grid grid-cols-[85px_1fr] items-start">
                    <span class="text-gray-400 text-[9px] uppercase tracking-[0.2em] font-sans font-medium mt-1">Place</span>
                    <div class="flex flex-col">
                        <span class="font-serif text-[13px] text-gray-900 font-medium leading-tight">@Model.Name</span>
                        <span class="font-mono text-[9px] text-gray-400 tracking-wide mt-1.5 uppercase">@Model.Location</span>
                    </div>
                </div>

                <div class="grid grid-cols-[85px_1fr] items-baseline">
                    <span class="text-gray-400 text-[9px] uppercase tracking-[0.2em] font-sans font-medium">Country</span>
                    <span class="font-serif text-[13px] text-gray-900 font-medium">@Model.Country</span>
                </div>

                <div class="grid grid-cols-[85px_1fr] items-baseline">
                    <span class="text-gray-400 text-[9px] uppercase tracking-[0.2em] font-sans font-medium">Photos</span>
                    <span class="font-serif text-[13px] text-gray-900 font-medium">@Model.TotalPhotos captured</span>
                </div>
            </div>

        </div>

        <div class="flex-grow hidden lg:block"></div>

        <div class="mt-12 lg:mt-0 flex justify-between items-end text-[9px] text-gray-300 font-sans tracking-wide">
            <div>
                <p>&copy; MMXXV Helmy Luqmanulhakim.</p>
            </div>
            <svg class="text-gray-200 hover:text-black transition-colors cursor-help" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.2"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>
        </div>

    </aside>

</div>

<style>
    .hide-scrollbar::-webkit-scrollbar {
        display: none;
    }
    .hide-scrollbar {
        -ms-overflow-style: none;
        scrollbar-width: none;
    }
</style>