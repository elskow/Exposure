@using Gallery.Models
@model RollDetailPage

@{
    ViewData["Title"] = "Roll " + Model.RollId;
}

<div class="max-w-[1600px] mx-auto px-6 lg:px-12 flex flex-col-reverse lg:flex-row gap-12 lg:gap-24 relative text-[#111]">

    <div class="flex-grow pt-8 lg:pt-32 pb-32">
        
        <div class="grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-x-3 gap-y-6 md:gap-x-4 md:gap-y-8">
            @foreach (var frame in Model.Frames)
            {
                <div class="flex flex-col group cursor-pointer transition-transform active:scale-95 duration-150 ease-out"
                     onclick="location.href='@Url.Action("Detail", "Roll", new { rollId = Model.RollId, frameNum = frame.Num })'">
                    
                    <div class="w-full relative overflow-hidden border border-black/5 @(frame.IsPortrait ? "aspect-[2/3]" : "aspect-[3/2]")">
                        <div class="absolute inset-0 bg-neutral-200"></div>
                        <div class="absolute inset-0 bg-gradient-to-b from-black/5 to-black/20"></div>
                        <div class="absolute inset-0 opacity-20 mix-blend-overlay" 
                             style="background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0IiBoZWlnaHQ9IjQiPgo8cmVjdCB3aWR0aD0iNCIgaGVpZ2h0PSI0IiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9IjAuMSIvPgo8L3N2Zz4=');">
                        </div>
                        <div class="absolute inset-0 bg-white/0 group-hover:bg-white/10 transition-colors duration-300"></div>
                    </div>
                    
                    <span class="mt-2 text-[8px] text-gray-300 font-mono tracking-widest group-hover:text-black transition-colors">
                        @frame.Num.ToString("D2")
                    </span>
                </div>
            }
        </div>
    </div>

    <aside class="w-full lg:w-72 lg:sticky lg:top-0 lg:h-screen flex flex-col shrink-0 py-12 lg:py-32 overflow-y-auto hide-scrollbar border-b lg:border-b-0 border-gray-100 lg:border-none">
        
        <div class="mb-12 lg:mb-16">
            <a href="@Url.Action("Index", "Home")" class="group inline-flex items-center gap-3 text-gray-300 hover:text-black transition-colors duration-300">
                <div class="relative flex items-center justify-center">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round" class="transition-transform duration-300 group-hover:-translate-x-1">
                        <line x1="19" y1="12" x2="5" y2="12"></line>
                        <polyline points="12 19 5 12 12 5"></polyline>
                    </svg>
                </div>
                <span class="text-[10px] font-mono tracking-[0.2em] uppercase pt-px">Index</span>
            </a>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:flex lg:flex-col gap-8 lg:gap-0">
            
            <div class="mb-8 lg:mb-14 border-b border-gray-100 pb-8">
                <h1 class="font-mono text-[10px] uppercase tracking-widest text-gray-400 mb-2">RL/@Model.RollId.ToString("D2")</h1>
                <div class="font-serif text-[13px] text-gray-900 leading-relaxed italic">
                    <p>Published @Model.Date</p>
                    <p class="text-gray-500">@Model.TotalFrames frames / @Model.Keepers keepers</p>
                </div>
            </div>

            <div class="space-y-6 lg:space-y-7 font-serif text-[11px]">
                <div class="grid grid-cols-[60px_1fr] items-baseline">
                    <span class="text-gray-400 text-[10px] uppercase tracking-wider font-sans">Stock</span>
                    <div class="flex flex-col text-gray-900">
                        <span class="font-medium">@Model.Film</span>
                        <span class="font-mono text-[9px] text-gray-400 tracking-wider mt-1">ISO 100 — 135 — C41</span>
                    </div>
                </div>
                <div class="grid grid-cols-[60px_1fr] items-baseline">
                    <span class="text-gray-400 text-[10px] uppercase tracking-wider font-sans">Camera</span>
                    <span class="text-gray-900 font-medium">@Model.Camera</span>
                </div>
                <div class="grid grid-cols-[60px_1fr] items-baseline">
                    <span class="text-gray-400 text-[10px] uppercase tracking-wider font-sans">Lens</span>
                    <span class="text-gray-900 font-medium">@Model.Lens</span>
                </div>
            </div>

            <div class="mt-0 lg:mt-16 space-y-1.5 font-serif text-[11px] text-gray-500 leading-relaxed">
                <p class="text-black">Jakarta, ID</p>
                <p>Self scan (Noritsu LS-600)</p>
                <p class="border-b border-gray-100 pb-1 mb-1 inline-block">Dev at Labs Helmy</p>
                <p class="text-gray-300 text-[9px] font-mono mt-2">Leica M11-P Safari, 100 Elmarit-R</p>
            </div>

        </div>

        <div class="flex-grow hidden lg:block"></div>

        <div class="mt-12 lg:mt-0 flex justify-between items-end text-[9px] text-gray-300 font-sans tracking-wide">
            <div>
                <p>&copy; MMXXV Helmy Luqmanulhakim.</p>
            </div>
            <svg class="text-gray-200 hover:text-black transition-colors cursor-help" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.2"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>
        </div>

    </aside>

</div>

<style>
    .hide-scrollbar::-webkit-scrollbar {
        display: none;
    }
    .hide-scrollbar {
        -ms-overflow-style: none;
        scrollbar-width: none;
    }
</style>