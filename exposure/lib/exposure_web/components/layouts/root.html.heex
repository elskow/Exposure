<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="csrf-token" content={try do get_csrf_token() rescue _ -> "" end} />
    <.live_title default="Exposure - Travel Photo Gallery">
      {assigns[:page_title]}
    </.live_title>

    <%!-- SEO Meta Tags --%>
    <meta name="description" content={assigns[:meta_description] || "A curated collection of travel photography from places around the world."} />
    
    <%!-- Open Graph / Social --%>
    <meta property="og:type" content={assigns[:og_type] || "website"} />
    <meta property="og:site_name" content="Exposure" />
    <meta property="og:title" content={assigns[:page_title] || "Exposure - Travel Photo Gallery"} />
    <meta property="og:description" content={assigns[:meta_description] || "A curated collection of travel photography from places around the world."} />
    <%= if assigns[:og_image] do %>
      <meta property="og:image" content={@og_image} />
      <meta property="og:image:alt" content={assigns[:og_image_alt] || assigns[:page_title] || "Travel photo"} />
      <%= if assigns[:og_image_width] do %>
        <meta property="og:image:width" content={@og_image_width} />
      <% end %>
      <%= if assigns[:og_image_height] do %>
        <meta property="og:image:height" content={@og_image_height} />
      <% end %>
    <% end %>
    <%= if assigns[:canonical_url] do %>
      <meta property="og:url" content={@canonical_url} />
    <% end %>
    
    <%!-- Twitter Card --%>
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content={assigns[:page_title] || "Exposure - Travel Photo Gallery"} />
    <meta name="twitter:description" content={assigns[:meta_description] || "A curated collection of travel photography from places around the world."} />
    <%= if assigns[:og_image] do %>
      <meta name="twitter:image" content={@og_image} />
    <% end %>

    <%!-- Canonical URL --%>
    <%= if assigns[:canonical_url] do %>
      <link rel="canonical" href={@canonical_url} />
    <% end %>

    <%!-- Favicons --%>
    <link rel="icon" href="/favicon.ico" sizes="48x48" />
    <link rel="icon" href="/images/logo.svg" type="image/svg+xml" />
    <link rel="apple-touch-icon" href="/images/logo.svg" />

    <%!-- JSON-LD Structured Data --%>
    <%= if assigns[:json_ld] do %>
      <script type="application/ld+json">
        <%= raw(Jason.encode!(@json_ld)) %>
      </script>
    <% else %>
      <script type="application/ld+json">
        {
          "@context": "https://schema.org",
          "@type": "WebSite",
          "name": "Exposure",
          "description": "A curated collection of travel photography",
          "url": "<%= assigns[:canonical_url] || ExposureWeb.ViewHelpers.absolute_url("/") %>"
        }
      </script>
    <% end %>

    <!-- Preload critical fonts -->
    <link rel="preload" href="/fonts/lora/lora-italic-400.ttf" as="font" type="font/ttf" crossorigin />
    <link rel="preload" href="/fonts/dm-mono/dm-mono-400.ttf" as="font" type="font/ttf" crossorigin />

    <link phx-track-static rel="stylesheet" href={~p"/assets/css/app.css"} />
    <script defer phx-track-static type="text/javascript" src={~p"/assets/js/app.js"}>
    </script>

    <style>
      :root {
        --font-serif: 'Lora', serif;
        --font-mono: 'DM Mono', monospace;
      }

      body {
        font-family: var(--font-serif);
        font-size: 1.05rem;
        line-height: 1.7;
        letter-spacing: 0.01em;
      }

      .font-mono {
        font-family: var(--font-mono);
        font-size: 0.75rem;
        letter-spacing: 0.05em;
      }

      h1, h2, h3, .italic {
        font-style: italic;
      }

      html { scroll-behavior: smooth; }

      /* Keyboard focus styles */
      a:focus, button:focus {
        outline: 2px solid #000;
        outline-offset: 2px;
      }
    </style>
  </head>
  <body class="bg-[#FCFCFA] text-[#222] antialiased selection:bg-gray-900 selection:text-white">
    <main role="main">
      {@inner_content}
    </main>
  </body>
</html>
